<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Go: Conversions | Programming.Guide</title>
    <link href="../css/base.css" rel="stylesheet" />
    <link href="../favicon.ico" rel="icon" />
    <meta content="Go conversions (casts) in a nutshell." name="description" />
    <meta
      content="go, golang, convert, cast, string, number, byte slice, rune slice, underlying type, pointer"
      name="keywords"
    />
    <!-- Global site tag (gtag.js) - Google Analytics -->

    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-62262792-2"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-62262792-2");
    </script>
    <script>
      /**
       * https://support.google.com/analytics/answer/1136920?hl=en
       *
       * Function that tracks a click on an outbound link in Analytics.
       * This function takes a valid URL string as an argument, and uses that URL string
       * as the event label. Setting the transport method to 'beacon' lets the hit be sent
       * using 'navigator.sendBeacon' in browser that support it.
       */
      var trackOutboundLink = function (url) {
        ga("send", "event", "outbound", "click", url, {
          transport: "beacon",
          hitCallback: function () {
            document.location = url;
          },
        });
      };
    </script>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
    ></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-1475100101081278",
        enable_page_level_ads: true,
      });
    </script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <script src="../cookieconsent.min.js"></script>
    <script>
      window.addEventListener("load", function () {
        window.cookieconsent.initialise({
          palette: {
            popup: {
              background: "#006699",
            },
            button: {
              background: "#cccccc",
            },
          },
          theme: "classic",
          dismissOnScroll: 200,
          dismissOnWindowClick: true,
          content: {
            message:
              "By interacting with this site you approve the use of cookies.",
            href: "/terms-and-conditions.html",
          },
        });
      });
    </script>
    <link href="../css/go-highlighting.css" rel="stylesheet" />
  </head>
  <body>
    <header>
      <div class="ad">
        <script
          async
          src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
        ></script>
        <ins
          class="adsbygoogle"
          data-ad-client="ca-pub-1475100101081278"
          data-ad-format="link"
          data-ad-slot="6424388494"
          data-full-width-responsive="true"
          style="display: block"
        ></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </div>
    </header>
    <main>
      <aside id="primary-aside">
        <div class="ad">
          <script
            async
            src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
          ></script>
          <ins
            class="adsbygoogle"
            data-ad-client="ca-pub-1475100101081278"
            data-ad-format="auto"
            data-ad-slot="4885566806"
            data-full-width-responsive="true"
            style="display: block"
          ></ins>
          <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
        </div>
        <h2>Further Reading</h2>
        <div style="margin-bottom: 1em">
          <a href="convert-int-to-string.html">Convert int to string</a><br />
          <span style="color: grey; font-style: italic; font-size: smaller"
            >Programming.Guide</span
          >
        </div>
        <div style="margin-bottom: 1em">
          <a href="format-parse-string-time-date-example.html"
            >Format a time or date</a
          ><br />
          <span style="color: grey; font-style: italic; font-size: smaller"
            >Programming.Guide</span
          >
        </div>
        <div style="margin-bottom: 1em">
          <a href="untyped-constants.html"
            >Untyped numeric constants with no limits</a
          ><br />
          <span style="color: grey; font-style: italic; font-size: smaller"
            >Programming.Guide</span
          >
        </div>
        <div style="margin-bottom: 1em">
          <a href="string-functions-reference-cheat-sheet.html"
            >String handling cheat sheet</a
          ><br />
          <span style="color: grey; font-style: italic; font-size: smaller"
            >Programming.Guide</span
          >
        </div>
        <h2>Top Go Articles</h2>
        <ol class="nostyle">
          <li>
            <a href="go-gotcha.html">Go gotcha</a>
          </li>
          <li>
            <a href="string-functions-reference-cheat-sheet.html"
              >String handling cheat sheet</a
            >
          </li>
          <li>
            <a href="maps-explained.html">Maps explained</a>
          </li>
          <li>
            <a href="for-loop.html">For loops explained</a>
          </li>
          <li>
            <a href="go-concurrency-tutorial.html">Concurrent programming</a>
          </li>
        </ol>
        <p>
          <a href="index.html"><strong>See all 197 Go articles</strong></a>
        </p>
      </aside>
      <aside id="secondary-aside">
        <div class="ad">
          <script
            async
            src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
          ></script>
          <ins
            class="adsbygoogle"
            data-ad-client="ca-pub-1475100101081278"
            data-ad-format="auto"
            data-ad-slot="6240200444"
            data-full-width-responsive="true"
            style="display: block"
          ></ins>
          <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
        </div>
        <h2>Top Algorithm Articles</h2>
        <ol class="nostyle">
          <li>
            <a href="../dynamic-programming-vs-memoization-vs-tabulation.html"
              >Dynamic programming vs memoization vs tabulation</a
            >
          </li>
          <li>
            <a href="../big-o-notation-explained.html"
              >Big O notation explained</a
            >
          </li>
          <li>
            <a href="../sliding-window-example.html"
              >Sliding Window Algorithm with Example</a
            >
          </li>
          <li>
            <a href="../what-makes-a-good-loop-invariant.html"
              >What makes a good loop invariant?</a
            >
          </li>
          <li>
            <a href="../random-point-within-circle.html"
              >Generating a random point within a circle (uniformly)</a
            >
          </li>
        </ol>
        <p>
          <a href="../index.html"><b>See all articles</b></a>
        </p>
      </aside>
      <article>
        <h1>Go: Conversions</h1>
        <p>
          The expression <code>T(x)</code> converts the value <code>x</code> to
          the type <code>T</code>.
        </p>
        <pre><code>f := 5.1
i := <b>int(f)</b> <span class="comment">// convert float to int</span></code></pre>
        <p>The conversion rules are extensive but predictable:</p>
        <ul>
          <li>
            all conversions between typed expressions must be explicitly stated,
          </li>
          <li>and illegal conversions are caught by the compiler.</li>
        </ul>
        <p>
          Conversions between numbers and strings may
          <strong>change the representation</strong> and have a
          <strong>run-time cost</strong>. All other conversions only change the
          type but not the representation of&nbsp;<code>x</code>.
        </p>
        <h2>Integers</h2>
        <ul>
          <li>
            When converting to a shorter integer type, the value is
            <strong>truncated</strong> to fit in the result type's size.
          </li>
          <li>
            When converting to a longer integer type,
            <ul>
              <li>
                if the value is a signed integer, it is
                <a href="https://en.wikipedia.org/wiki/Sign_extension"
                  ><strong>sign extended</strong></a
                >;
              </li>
              <li>otherwise it is <strong>zero extended</strong>.</li>
            </ul>
          </li>
        </ul>
        <pre><code>var a uint16 = 0x10fe <span class="comment">//  bit pattern: 0001 0000 1111 1110</span>

<span class="comment">// Truncation</span>
b := int8(a) <span class="comment">// -2        bit pattern:           1111 1110</span>

<span class="comment">// Sign extention</span>
c := uint16(b) <span class="comment">// 0xfffe  bit pattern: 1111 1111 1111 1110</span></code></pre>
        <h2>Floats</h2>
        <ul>
          <li>
            When converting a floating-point number to an integer, the
            <strong>fraction is discarded</strong> (truncation towards zero).
          </li>
          <li>
            When converting an integer or floating-point number to a
            floating-point type, the result value is
            <strong>rounded to the precision</strong> specified by the
            destination type.
          </li>
        </ul>
        <pre><code>var f float64 = 1.9
n := int64(f) <span class="comment">// 1</span>
n = int64(-f) <span class="comment">// -1</span>

n = 1234567890
g := float32(n) <span class="comment">// 1.234568e+09</span></code></pre>
        <div class="article-box">
          <p>
            <strong>Warning:</strong> In all non-constant conversions involving
            floating-point or complex values, if the result type cannot
            represent the value the conversion succeeds but the result value is
            implementation-dependent.
            <a
              class="quote-source"
              href="https://golang.org/ref/spec#Conversions"
              >The Go Programming Language Specification: Conversions</a
            >
          </p>
        </div>
        <h2>Integer to string</h2>
        <ul>
          <li>
            When converting an integer to a string, the value is interpreted as
            a Unicode code point, and the resulting string will contain the
            character represented by that code point, encoded in UTF-8.
          </li>
          <li>
            If the value does not represent a valid code point (for instance if
            it's negative), the result will be <code>"\ufffd"</code>, the
            Unicode replacement character �.
          </li>
        </ul>
        <pre><code>string(97) <span class="comment">// "a"</span>
string(-1) <span class="comment">// "\ufffd" == "\xef\xbf\xbd"</span></code></pre>
        <div class="article-box">
          <p>
            To get the decimal string representation of an integer, use the
            <a href="https://golang.org/pkg/strconv/#Itoa"
              ><code>strconv.Itoa</code></a
            >
            function:
          </p>
          <pre><code>strconv.Itoa(97) <span class="comment">// "97"</span></code></pre>
        </div>
        <h2>Strings and byte slices</h2>
        <ul>
          <li>
            Converting a slice of bytes to a string type yields a string whose
            successive bytes are the elements of the slice.
          </li>
          <li>
            Converting a value of a string type to a slice of bytes type yields
            a slice whose successive elements are the bytes of the string.
          </li>
        </ul>
        <pre><code>string([]byte{97, 230, 151, 165}) <span class="comment">// "a日"</span>
[]byte("a日")                     <span class="comment">// []byte{97, 230, 151, 165}</span></code></pre>
        <h2>Strings and rune slices</h2>
        <ul>
          <li>
            Converting a slice of runes to a string type yields a string that is
            the concatenation of the individual rune values converted to
            strings.
          </li>
          <li>
            Converting a value of a string type to a slice of runes type yields
            a slice containing the individual Unicode code points of the string.
          </li>
        </ul>
        <pre><code>string([]rune{97, 26085}) <span class="comment">// "a日"</span>
[]rune("a日")             <span class="comment">// []rune{97, 26085}</span></code></pre>
        <h2>Underlying type</h2>
        <p>
          A non-constant value can be converted to type <code>T</code> if it has
          the same underlying type as <code>T</code>.
        </p>
        <p>
          In this example, the underlying type of <code>int64</code>,
          <code>T1</code>, and <code>T2</code> is <code>int64</code>.
        </p>
        <pre><code>type (
        T1 int64
        T2 T1
)
</code></pre>
        <p>
          It's idiomatic in Go to convert the type of an expression to access a
          specific method:
        </p>
        <pre><code>var n int64 = 12345
fmt.Println(n)                <span class="comment">// 12345</span>
fmt.Println(time.Duration(n)) <span class="comment">// 12.345µs</span></code></pre>
        <p>
          (The underlying type of
          <a href="https://golang.org/pkg/time/#Duration"
            ><code>time.Duration</code></a
          >
          is <code>int64</code>, and the <code>time.Duration</code> type has a
          <a href="https://golang.org/pkg/time/#Duration.String"
            ><code>String</code></a
          >
          method that returns the duration formatted as a time.)
        </p>
        <h2>Implicit conversions</h2>
        <p>
          The only implicit conversion in Go is when an untyped constant (see
          <a href="untyped-constants.html"
            >Go: Untyped numeric constants with no limits</a
          >) is used in a situation where a type is required.
        </p>
        <p>
          In this example the untyped literals <code>1</code> and
          <code>2</code> are implicitly converted:
        </p>
        <pre><code>var f float64
f = 1 <span class="comment">// Same as: f = float64(1)</span>

t := 2 * time.Second <span class="comment">// Same as: t := time.Duration(2) * time.Second</span></code></pre>
        <p>
          (The implicit conversions are necessary since there is no mixing of
          numeric types in Go. You can only multiply a
          <code>time.Duration</code> with another <code>time.Duration</code>.)
        </p>
        <p>
          When the type can't be inferred from the context, an untyped constant
          is converted to a <code>bool</code>, <code>int</code>,
          <code>float64</code>, <code>complex128</code>, <code>string</code> or
          <code>rune</code> depending on the syntactical format of the constant:
        </p>
        <pre><code>n := 1   <span class="comment">// Same as: n := int(1)</span>
f := 1.0 <span class="comment">// Same as: f := float64(1.0)</span>
s := "A" <span class="comment">// Same as: s := string("A")</span>
c := 'A' <span class="comment">// Same as: c := rune('A')</span></code></pre>
        <p>Illegal implicit conversions are caught by the compiler:</p>
        <pre><code>var b byte = 256 <span class="comment">// Same as: var b byte = byte(256)</span></code></pre>
        <pre><code>../main.go:2:6: constant 256 overflows byte
</code></pre>
        <h2>Pointers</h2>
        <p>
          The Go compiler does not allow conversions between pointers and
          integers. The package
          <a href="https://golang.org/pkg/unsafe/"><code>unsafe</code></a>
          implements this functionality under restricted circumstances.
        </p>
        <div class="article-box">
          The built-in package unsafe, known to the compiler, provides
          facilities for low-level programming including operations that violate
          the type system. A package using unsafe must be vetted manually for
          type safety and may not be portable.
          <a
            class="quote-source"
            href="https://golang.org/ref/spec#Package_unsafe"
            >The Go Programming Language Specification: Package unsafe</a
          >
        </div>
        <div>
          <h2>Comments</h2>
          <div style="margin-bottom: 1.5em">Be the first to comment!</div>
          <form
            action="https://programming.guide/_comments/add-comment"
            method="post"
          >
            <input name="reply_to" type="hidden" value="go/conversions.html" />
            <textarea name="text" placeholder="Comment"></textarea>
            <input name="author" placeholder="Name" type="text" />
            <input
              name="email"
              placeholder="E-mail (will not be published)"
              type="text"
            />
            <input type="submit" value="Submit" />
          </form>
        </div>
      </article>
    </main>
    <footer>
      © 2016–2021 Programming.Guide,
      <a
        href="../terms-and-conditions.html"
        style="color: inherit; text-decoration: underline"
        >Terms&nbsp;and&nbsp;Conditions</a
      >
    </footer>
    <script>
      // Copied from http://blog.dynamicdrive.com/detecting-adblock-on-your-site-and-logging-it-to-google-analytics/
      var test = document.createElement("div");
      test.innerHTML = "&nbsp;";
      test.className = "adsbox";
      document.body.appendChild(test);
      window.setTimeout(function () {
        if (test.offsetHeight === 0) {
          ga("send", "event", "Ad Setting", "Adblock", "Enabled");
        }
        test.remove();
      }, 400);
    </script>
  </body>
</html>
