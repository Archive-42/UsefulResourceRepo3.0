<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Java: Local methods (or submethods, or inner methods, or nested methods) | Programming.Guide</title>
  <link href="../css/base.css" rel="stylesheet">
  <link href="../favicon.ico" rel="icon">
  <meta content="This article describes various ways to create methods within methods." name="description">
  <meta content="java, inner methods, local methods, submethods, nested methods" name="keywords"><!-- Global site tag (gtag.js) - Google Analytics -->

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-62262792-2"></script>
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-62262792-2');
  </script>
  <script>
  /**
  * https://support.google.com/analytics/answer/1136920?hl=en
  *
  * Function that tracks a click on an outbound link in Analytics.
  * This function takes a valid URL string as an argument, and uses that URL string
  * as the event label. Setting the transport method to 'beacon' lets the hit be sent
  * using 'navigator.sendBeacon' in browser that support it.
  */
  var trackOutboundLink = function(url) {
   ga('send', 'event', 'outbound', 'click', url, {
     'transport': 'beacon',
     'hitCallback': function(){document.location = url;}
   });
  }
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1475100101081278",
    enable_page_level_ads: true
  });
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" rel="stylesheet" type="text/css">
  <script src="../cookieconsent.min.js"></script>
  <script>
  window.addEventListener("load", function(){
  window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#006699"
    },
    "button": {
      "background": "#cccccc"
    }
  },
  "theme": "classic",
  "dismissOnScroll": 200,
  "dismissOnWindowClick": true,
  "content": {
    "message": "By interacting with this site you approve the use of cookies.",
    "href": "/terms-and-conditions.html"
  }
  })});
  </script>
  <link href="../css/intellij-defaults.css" rel="stylesheet">
</head>
<body>
  <header>
    <div class="ad">
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" data-ad-client="ca-pub-1475100101081278" data-ad-format="link" data-ad-slot="6424388494" data-full-width-responsive="true" style="display:block"></ins> 
      <script>

                (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </header>
  <main>
    <aside id="primary-aside">
      <div class="ad">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" data-ad-client="ca-pub-1475100101081278" data-ad-format="auto" data-ad-slot="4885566806" data-full-width-responsive="true" style="display:block"></ins> 
        <script>

                (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </div>
      <div class="box">
        <h2>Featured Stack Overflow Post</h2><a href="https://stackoverflow.com/a/33627846/276052" onclick="trackOutboundLink('https://stackoverflow.com/a/33627846/276052'); return false;">In Java, difference between default, public, protected, and private</a><br>
        <br>
        <a href="https://stackoverflow.com/a/33627846/276052" onclick="trackOutboundLink('https://stackoverflow.com/a/33627846/276052'); return false;" style="display: block; text-align: center;"><img alt="StackOverflow screenshot thumbnail" class="screenshot" src="../images/so-featured-33627846.png" style="width: 100%; max-width: 15em;"></a>
      </div>
    </aside>
    <aside id="secondary-aside">
      <div class="ad">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" data-ad-client="ca-pub-1475100101081278" data-ad-format="auto" data-ad-slot="6240200444" data-full-width-responsive="true" style="display:block"></ins> 
        <script>

                (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </div>
      <h2>Top Java Articles</h2>
      <ol class="nostyle">
        <li>
          <a href="do-interfaces-inherit-from-object.html">Do interfaces inherit from Object?</a>
        </li>
        <li>
          <a href="executing-code-in-comments.html">Executing code in comments?!</a>
        </li>
        <li>
          <a href="functional-interfaces.html">Functional Interfaces</a>
        </li>
        <li>
          <a href="handling-interrupted-exceptions.html">Handling InterruptedException</a>
        </li>
        <li>
          <a href="why-wait-must-be-in-synchronized.html">Why wait must be called in a synchronized block</a>
        </li>
      </ol>
      <p><a href="index.html"><strong>See all 190 Java articles</strong></a></p>
      <h2>Top Algorithm Articles</h2>
      <ol class="nostyle">
        <li>
          <a href="../dynamic-programming-vs-memoization-vs-tabulation.html">Dynamic programming vs memoization vs tabulation</a>
        </li>
        <li>
          <a href="../big-o-notation-explained.html">Big O notation explained</a>
        </li>
        <li>
          <a href="../sliding-window-example.html">Sliding Window Algorithm with Example</a>
        </li>
        <li>
          <a href="../what-makes-a-good-loop-invariant.html">What makes a good loop invariant?</a>
        </li>
        <li>
          <a href="../random-point-within-circle.html">Generating a random point within a circle (uniformly)</a>
        </li>
      </ol>
    </aside>
    <article>
      <h1>Java: Local methods (or submethods, or inner methods, or nested methods)</h1>
      <p>Java does <em>not</em> support local methods. This will <em>not</em> compile:</p>
      <pre><code><span class="keyword">class</span> C {
    <span class="keyword">void</span> m() {
<span class="badCode">        <span class="keyword">void</span> n() {
            System.<span class="static_field">out</span>.println(<span class="text_lit">"Hello World"</span>);
        }</span>
        n();
    }
}</code></pre>
      <p>Here are a few alternatives that do compile…</p>
      <h2>Using a lambda (Java 8+)</h2>
      <pre><code><span class="keyword">class</span> <span class="type">C</span> {
    <span class="keyword">void</span> <span class="method">m</span>() {
        <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Runnable.html"><span class="type">Runnable</span></a> <span class="type">r</span> = () -&gt; {
            <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/System.html"><span class="type">System</span></a>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/System.html#out"><span class="static_final_field">out</span></a>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/PrintStream.html#println(java.lang.String)"><span class="method">println</span></a>(<span class="text_lit">"Hello World"</span>);
        };
        <span class="type">r</span>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Runnable.html#run()"><span class="method">run</span></a>();
    }
}
</code></pre>
      <p>You may also access local variables, pass arguments and read return values:</p>
      <pre><code><span class="keyword">import</span> <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/PrintStream.html"><span class="type">java.io.PrintStream</span></a>;
<span class="keyword">import</span> <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/Function.html"><span class="type">java.util.function.Function</span></a>;
<span class="keyword">class</span> <span class="type">C</span> {
    <span class="keyword">void</span> <span class="method">m</span>() {
        <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/PrintStream.html"><span class="type">PrintStream</span></a> <span class="type">pw</span> = <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/System.html"><span class="type">System</span></a>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/System.html#out"><span class="static_final_field">out</span></a>;
        <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/Function.html"><span class="type">Function</span></a>&lt;<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html"><span class="type">String</span></a>, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Integer.html"><span class="type">Integer</span></a>&gt; <span class="type">print</span> = <span class="type">str</span> -&gt; {
            <span class="type">pw</span>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/PrintStream.html#println(java.lang.String)"><span class="method">println</span></a>(<span class="type">str</span>);
            <span class="keyword">return</span> <span class="type">str</span>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#length()"><span class="method">length</span></a>();
        };
        <span class="keyword">int</span> <span class="type">charsPrinted</span> = <span class="type">print</span>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/Function.html#apply(java.lang.String)"><span class="method">apply</span></a>(<span class="text_lit">"Hello World"</span>);
    }
}
</code></pre>
      <p>See also: <a href="lambda-cheat-sheet.html">Lambda Cheat Sheet</a></p>
      <h2>Using anonymous subclasses</h2>
      <p>Slightly more verbose than the above, but works in Java 7 and below.</p>
      <pre><code><span class="keyword">class</span> <span class="type">C</span> {
    <span class="keyword">void</span> <span class="method">m</span>() {
        <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Runnable.html"><span class="type">Runnable</span></a> <span class="type">r</span> = <span class="keyword">new</span> <span class="type">Runnable</span>() {
            <span class="keyword">public</span> <span class="keyword">void</span> <span class="method">run</span>() {
                <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/System.html"><span class="type">System</span></a>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/System.html#out"><span class="static_final_field">out</span></a>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/PrintStream.html#println(java.lang.String)"><span class="method">println</span></a>(<span class="text_lit">"Hello World"</span>);
            };
        };
        <span class="type">r</span>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Runnable.html#run()"><span class="method">run</span></a>();
    }
}
</code></pre>
      <h2>Using local classes</h2>
      <pre><code><span class="keyword">class</span> <span class="type">C</span> {
    <span class="keyword">void</span> <span class="method">m</span>() {
        <span class="keyword">class</span> <span class="type">Local</span> {
            <span class="keyword">void</span> <span class="method">n</span>() {
                <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/System.html"><span class="type">System</span></a>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/System.html#out"><span class="static_final_field">out</span></a>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/PrintStream.html#println(java.lang.String)"><span class="method">println</span></a>(<span class="text_lit">"Hello World"</span>);
            }
        }
        <span class="keyword">new</span> <span class="type">Local</span>().<span class="method">n</span>();
    }
}
</code></pre>
      <p>Note that local classes comes with some restrictions:</p>
      <blockquote>
        <p><strong>3.11.2. Restrictions on Local Classes</strong></p>
        <p>Local classes are subject to the following restrictions:</p>
        <ul>
          <li>
            <p>A local class is visible only within the block that defines it; it can never be used outside that block.</p>
          </li>
          <li>
            <p>Local classes cannot be declared public, protected, private, or static. These modifiers are for members of classes; they are not allowed with local variable declarations or local class declarations.</p>
          </li>
          <li>
            <p>Like member classes, and for the same reasons, local classes cannot contain static fields, methods, or classes. The only exception is for constants that are declared both static and final.</p>
          </li>
          <li>
            <p>Interfaces cannot be defined locally.</p>
          </li>
          <li>
            <p>A local class, like a member class, cannot have the same name as any of its enclosing classes.</p>
          </li>
          <li>
            <p>As noted earlier, a local class can use the local variables, method parameters, and even exception parameters that are in its scope, but only if those variables or parameters are declared final. This is because the lifetime of an instance of a local class can be much longer than the execution of the method in which the class is defined. For this reason, a local class must have a private internal copy of all local variables it uses (these copies are automatically generated by the compiler). The only way to ensure that the local variable and the private copy are always the same is to insist that the local variable is final. <a class="quote-source" href="http://docstore.mik.ua/orelly/java-ent/jnut/ch03_11.htm">Java in a Nutshell, Chapter 3.11.2</a></p>
          </li>
        </ul>
      </blockquote>
      <h2>Local Scoping</h2>
      <p>If all you're after is localized scoping, you can simply do:</p>
      <pre><code><span class="keyword">class</span> <span class="type">C</span> {
    <span class="keyword">void</span> <span class="method">m</span>() {
        {
            <span class="keyword">int</span> <span class="type">i</span> = <span class="num_lit">7</span>;
            <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/System.html"><span class="type">System</span></a>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/System.html#out"><span class="static_final_field">out</span></a>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/PrintStream.html#println(int)"><span class="method">println</span></a>(<span class="type">i</span>);
        }
        <span class="comment">// System.out.println(i);  Wouldn't compile. i is out of scope.</span>
    }
}
</code></pre>
      <div>
        <h2>Comments</h2>
        <div style="margin-bottom: 1.5em">
          Be the first to comment!
        </div>
        <form action="https://programming.guide/_comments/add-comment" method="post">
          <input name="reply_to" type="hidden" value="java/local-methods.html"> 
          <textarea name="text" placeholder="Comment"></textarea> <input name="author" placeholder="Name" type="text"> <input name="email" placeholder="E-mail (will not be published)" type="text"> <input type="submit" value="Submit">
        </form>
      </div>
    </article>
  </main>
  <footer>
    © 2016–2021 Programming.Guide, <a href="../terms-and-conditions.html" style="color: inherit; text-decoration: underline">Terms&nbsp;and&nbsp;Conditions</a>
  </footer>
  <script>
  // Copied from http://blog.dynamicdrive.com/detecting-adblock-on-your-site-and-logging-it-to-google-analytics/
  var test = document.createElement('div');
  test.innerHTML = '&nbsp;';
  test.className = 'adsbox';
  document.body.appendChild(test);
  window.setTimeout(function() {
    if (test.offsetHeight === 0) {
        ga('send', 'event', 'Ad Setting', 'Adblock', 'Enabled');
    }
    test.remove();
  }, 400);
  </script>
</body>
</html>
