<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Java: Handling InterruptedException | Programming.Guide</title>
  <link href="../css/base.css" rel="stylesheet">
  <link href="../favicon.ico" rel="icon">
  <meta content="This article discusses how to handle InterruptedExceptions. When it should be caught and when it should be propagated." name="description">
  <meta content="java, InterruptedException, threads, multithreading" name="keywords"><!-- Global site tag (gtag.js) - Google Analytics -->

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-62262792-2"></script>
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-62262792-2');
  </script>
  <script>
  /**
  * https://support.google.com/analytics/answer/1136920?hl=en
  *
  * Function that tracks a click on an outbound link in Analytics.
  * This function takes a valid URL string as an argument, and uses that URL string
  * as the event label. Setting the transport method to 'beacon' lets the hit be sent
  * using 'navigator.sendBeacon' in browser that support it.
  */
  var trackOutboundLink = function(url) {
   ga('send', 'event', 'outbound', 'click', url, {
     'transport': 'beacon',
     'hitCallback': function(){document.location = url;}
   });
  }
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1475100101081278",
    enable_page_level_ads: true
  });
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" rel="stylesheet" type="text/css">
  <script src="../cookieconsent.min.js"></script>
  <script>
  window.addEventListener("load", function(){
  window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#006699"
    },
    "button": {
      "background": "#cccccc"
    }
  },
  "theme": "classic",
  "dismissOnScroll": 200,
  "dismissOnWindowClick": true,
  "content": {
    "message": "By interacting with this site you approve the use of cookies.",
    "href": "/terms-and-conditions.html"
  }
  })});
  </script>
  <link href="../css/intellij-defaults.css" rel="stylesheet">
</head>
<body>
  <header>
    <div class="ad">
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" data-ad-client="ca-pub-1475100101081278" data-ad-format="link" data-ad-slot="6424388494" data-full-width-responsive="true" style="display:block"></ins> 
      <script>

                (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </header>
  <main>
    <aside id="primary-aside">
      <div class="ad">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" data-ad-client="ca-pub-1475100101081278" data-ad-format="auto" data-ad-slot="4885566806" data-full-width-responsive="true" style="display:block"></ins> 
        <script>

                (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </div>
      <div class="box">
        <h2>Featured Stack Overflow Post</h2><a href="https://stackoverflow.com/a/33627846/276052" onclick="trackOutboundLink('https://stackoverflow.com/a/33627846/276052'); return false;">In Java, difference between default, public, protected, and private</a><br>
        <br>
        <a href="https://stackoverflow.com/a/33627846/276052" onclick="trackOutboundLink('https://stackoverflow.com/a/33627846/276052'); return false;" style="display: block; text-align: center;"><img alt="StackOverflow screenshot thumbnail" class="screenshot" src="../images/so-featured-33627846.png" style="width: 100%; max-width: 15em;"></a>
      </div>
    </aside>
    <aside id="secondary-aside">
      <div class="ad">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class="adsbygoogle" data-ad-client="ca-pub-1475100101081278" data-ad-format="auto" data-ad-slot="6240200444" data-full-width-responsive="true" style="display:block"></ins> 
        <script>

                (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </div>
      <h2>Top Java Articles</h2>
      <ol class="nostyle">
        <li>
          <a href="do-interfaces-inherit-from-object.html">Do interfaces inherit from Object?</a>
        </li>
        <li>
          <a href="executing-code-in-comments.html">Executing code in comments?!</a>
        </li>
        <li>
          <a href="functional-interfaces.html">Functional Interfaces</a>
        </li>
        <li class="current">Handling InterruptedException</li>
        <li>
          <a href="why-wait-must-be-in-synchronized.html">Why wait must be called in a synchronized block</a>
        </li>
      </ol>
      <p><a href="index.html"><strong>See all 190 Java articles</strong></a></p>
      <h2>Top Algorithm Articles</h2>
      <ol class="nostyle">
        <li>
          <a href="../dynamic-programming-vs-memoization-vs-tabulation.html">Dynamic programming vs memoization vs tabulation</a>
        </li>
        <li>
          <a href="../big-o-notation-explained.html">Big O notation explained</a>
        </li>
        <li>
          <a href="../sliding-window-example.html">Sliding Window Algorithm with Example</a>
        </li>
        <li>
          <a href="../what-makes-a-good-loop-invariant.html">What makes a good loop invariant?</a>
        </li>
        <li>
          <a href="../random-point-within-circle.html">Generating a random point within a circle (uniformly)</a>
        </li>
      </ol>
    </aside>
    <article>
      <h1>Java: Handling InterruptedException</h1>
      <p>You probably come because you've called a method that throws <code>InterruptedException</code> and need to deal with it somehow.</p>
      <p>First of all, you should see <code>throws InterruptedException</code> for what it is: A part of the method signature and a possible outcome of calling the method you're calling. So start by embracing the fact that an <code>InterruptedException</code> is a perfectly valid result of the method call.</p>
      <p>Now, if the method you're calling throws such exception, what should <em>your</em> method do? You can figure out the answer by thinking about the following:</p>
      <p><strong>Does it make sense for the method <em>you</em> are implementing to throw an <code>InterruptedException</code>?</strong> Put differently, is an <code>InterruptedException</code> a sensible outcome when calling <em>your</em> method?</p>
      <ul>
        <li>If <strong>yes</strong>, then <code>throws InterruptedException</code> should be part of <em>your</em> method signature, and you should let the exception propagate (i.e. don't catch it at all).
          <div class="article-box">
            <p><strong>Example:</strong> Your method waits for a value from the network to finish the computation and return a result. If the blocking network call throws an <code>InterruptedException</code> your method can not finish computation in a normal way. You let the <code>InterruptedException</code> propagate.</p>
            <pre><code><span class="keyword">int</span> computeSum(Server server) <span class="keyword">throws</span> InterruptedException {
    <span class="comment">// Any InterruptedException thrown below is propagated</span>
    <span class="keyword">int</span> a = server.getValueA();
    <span class="keyword">int</span> b = server.getValueB();
    <span class="keyword">return</span> a + b;
}</code></pre>
          </div>
        </li>
        <li>
          <p>If <strong>no</strong>, then you should not declare your method with <code>throws InterruptedException</code> and you should (must!) catch the exception. Now two things are important to keep in mind in this situation:</p>
          <ol>
            <li>Someone interrupted your thread. That someone is probably eager to cancel the operation, terminate the program gracefully, or whatever. You should be polite to that someone and return from your method without further ado.</li>
            <li>
              <p>Even though <em>your</em> method can manage to produce a sensible return value in case of an <code>InterruptedException</code> the fact that the thread has been interrupted may still be of importance. In particular, the code that calls your method may be interested in whether an interruption occurred during execution of your method. You should therefor log the fact an interruption took place by setting the interrupted flag: <code>Thread.currentThread().interrupt()</code></p>
            </li>
          </ol>
          <div class="article-box">
            <p><strong>Example:</strong> The user has asked to print the sum of two values. Printing <em>"Failed to compute sum"</em> is acceptable if the sum can't be computed (and much better than letting the program crash with a stack trace due to an <code>InterruptedException</code>). In other words, it does <em>not</em> make sense to declare this method with <code>throws InterruptedException</code>.</p>
            <pre><code><span class="keyword">void</span> printSum(Server server) {
    <span class="keyword">try</span> {
        <span class="keyword">int</span> sum = computeSum(server);
        System.out.println(<span class="text_lit">"Sum: "</span> + sum);
    } <span class="keyword">catch</span> (InterruptedException e) {
        Thread.currentThread().interrupt();  <span class="comment">// set interrupt flag</span>
        System.out.println(<span class="text_lit">"Failed to compute sum"</span>);
    }
}
</code></pre>
          </div>
        </li>
      </ul>
      <p>By now it should be clear that just doing <code>throw new RuntimeException(e)</code> is a bad idea. It isn't very polite to the caller. You could invent a new runtime exception but the root cause (someone wants the thread to stop execution) might get lost.</p>
      <h2>Another example: Implementing <code>Runnable</code></h2>
      <p>As you may have discovered, the signature of <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html#run--"><code>Runnable.run</code></a> does not allow for rethrowing <code>InterruptedExceptions</code>. Well, <em>you</em> signed up on implementing <code>Runnable</code>, which means that <em>you</em> signed up to deal with possible <code>InterruptedExceptions</code>. Either choose a different interface, such as <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Callable.html"><code>Callable</code></a>, or follow the second approach above.</p>
      <h2>Yet another: Calling <code>Thread.sleep</code></h2>
      <p>You're attempting to read a file and the spec says you should try 10 times with 1 second in between. You call <code>Thread.sleep(1000)</code>. So, you need to deal with <code>InterruptedException</code>. For a method such as <code>tryToReadFile</code> it makes perfect sense to say, <em>"If I'm interrupted, I can't complete my action of trying to read the file"</em>. In other words, it makes perfect sense for the method to throw <code>InterruptedExceptions</code>.</p>
      <pre><code><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html"><span class="type">String</span></a> <span class="method">tryToReadFile</span>(<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/File.html"><span class="type">File</span></a> <span class="type">f</span>) <span class="keyword">throws</span> <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/InterruptedException.html"><span class="type">InterruptedException</span></a> {
    <span class="keyword">for</span> (<span class="keyword">int</span> <span class="type">i</span> = <span class="num_lit">0</span>; <span class="type">i</span> &lt; <span class="num_lit">10</span>; <span class="type">i</span>++) {
        <span class="keyword">if</span> (<span class="type">f</span>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/File.html#exists()"><span class="method">exists</span></a>())
            <span class="keyword">return</span> <span class="method">readFile</span>(<span class="type">f</span>);
        <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html"><span class="type">Thread</span></a>.<a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.html#sleep(long)"><span class="static_method">sleep</span></a>(<span class="num_lit">1000</span>);
    }
    <span class="keyword">return</span> <span class="keyword">null</span>;
}
</code></pre>
      <div>
        <h2>Comments (4)</h2>
        <div class="article-comment" id="c1484550840-Eu5ieJoh">
          <div class="article-comment-avatar"><img alt="User avatar" src="https://www.gravatar.com/avatar/d41d8cd98f00b204e9800998ecf8427e?d=mp"></div>
          <div class="article-comment-content">
            <div>
              <p>I've gone through a bunch of articles on handling <code>InterruptedException</code> and have not found any example which says that an operation should be retried upon <code>InterruptedException</code>. So I assumed all authors, including you, implied that this exception should not be retried.</p>
              <p>Is this the case? Does <code>InterruptedException</code> imply cancel/terminate, or can it also imply something else, like retry?</p>
            </div>
            <details>
              <summary class="article-comment-footer">
                <span style="color: grey">by Abhishek Agrawal&nbsp;|&nbsp;</span> <span class="reply-button">Reply</span>
              </summary>
              <form action="https://programming.guide/_comments/add-comment" method="post">
                <input name="reply_to" type="hidden" value="1484550840-Eu5ieJoh"> 
                <textarea name="text" placeholder="Comment"></textarea> <input name="author" placeholder="Name" type="text"> <input name="email" placeholder="E-mail (will not be published)" type="text"> <input type="submit" value="Submit">
              </form>
            </details>
            <div class="article-comment" id="c1484557560-Ohshi0ze">
              <div class="article-comment-avatar"><img alt="User avatar" src="https://www.gravatar.com/avatar/99e100243aaa8b1469b1ed4e8bbecb06?d=mp"></div>
              <div class="article-comment-content">
                <div>
                  <p>An interrupt means that someone wants the thread to bail out from its currently blocking operation. It's indeed common that this is part of some higher level "abort", like user tries to terminate the application, but this is arguably not always the case.</p>
                  <p>Ultimately it is only the thread that interrupts that knows the reason for the interruption, so generally speaking the interrupting thread needs to communicate the intention to the interrupted thread, unless it's implicitly clear from the context. For example, if someone pokes at me while I'm reading a book, and I look up at him, I expect him to tell me what he wants. If he gives me a blank stare, (and it's not clear from the context) then I will not know how to respond to the interruption.</p>
                </div>
                <details>
                  <summary class="article-comment-footer">
                    <span style="color: grey">by Andreas Lundblad&nbsp;|&nbsp;</span> <span class="reply-button">Reply</span>
                  </summary>
                  <form action="https://programming.guide/_comments/add-comment" method="post">
                    <input name="reply_to" type="hidden" value="1484557560-Ohshi0ze"> 
                    <textarea name="text" placeholder="Comment"></textarea> <input name="author" placeholder="Name" type="text"> <input name="email" placeholder="E-mail (will not be published)" type="text"> <input type="submit" value="Submit">
                  </form>
                </details>
                <div class="article-comment" id="c1516688040-sheeVee3">
                  <div class="article-comment-avatar"><img alt="User avatar" src="https://www.gravatar.com/avatar/d41d8cd98f00b204e9800998ecf8427e?d=mp"></div>
                  <div class="article-comment-content">
                    <div>
                      <p>How would the interrupting thread communicate why it is interrupting another thread?</p>
                    </div>
                    <details>
                      <summary class="article-comment-footer">
                        <span style="color: grey">by Kevin Garrett&nbsp;|&nbsp;</span> <span class="reply-button">Reply</span>
                      </summary>
                      <form action="https://programming.guide/_comments/add-comment" method="post">
                        <input name="reply_to" type="hidden" value="1516688040-sheeVee3"> 
                        <textarea name="text" placeholder="Comment"></textarea> <input name="author" placeholder="Name" type="text"> <input name="email" placeholder="E-mail (will not be published)" type="text"> <input type="submit" value="Submit">
                      </form>
                    </details>
                    <div class="article-comment" id="c1516695540-quech1Gi">
                      <div class="article-comment-avatar"><img alt="User avatar" src="https://www.gravatar.com/avatar/99e100243aaa8b1469b1ed4e8bbecb06?d=mp"></div>
                      <div class="article-comment-content">
                        <div>
                          <p>Threads can communicate with each other by for instance sharing a reference to a synchronized message queue, such as an <code>ArrayBlockingQueue</code>. The interrupting thread could then do <code>msgQueue.offer("timeout")</code> and the interrupted thread could do <code>msgQueue.take()</code> to retrieve the message.</p>
                        </div>
                        <details>
                          <summary class="article-comment-footer">
                            <span style="color: grey">by Andreas Lundblad&nbsp;|&nbsp;</span> <span class="reply-button">Reply</span>
                          </summary>
                          <form action="https://programming.guide/_comments/add-comment" method="post">
                            <input name="reply_to" type="hidden" value="1516695540-quech1Gi"> 
                            <textarea name="text" placeholder="Comment"></textarea> <input name="author" placeholder="Name" type="text"> <input name="email" placeholder="E-mail (will not be published)" type="text"> <input type="submit" value="Submit">
                          </form>
                        </details>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <h3>Add comment</h3>
        <form action="https://programming.guide/_comments/add-comment" method="post">
          <input name="reply_to" type="hidden" value="java/handling-interrupted-exceptions.html"> 
          <textarea name="text" placeholder="Comment"></textarea> <input name="author" placeholder="Name" type="text"> <input name="email" placeholder="E-mail (will not be published)" type="text"> <input type="submit" value="Submit">
        </form>
      </div>
    </article>
  </main>
  <footer>
    © 2016–2021 Programming.Guide, <a href="../terms-and-conditions.html" style="color: inherit; text-decoration: underline">Terms&nbsp;and&nbsp;Conditions</a>
  </footer>
  <script>
  // Copied from http://blog.dynamicdrive.com/detecting-adblock-on-your-site-and-logging-it-to-google-analytics/
  var test = document.createElement('div');
  test.innerHTML = '&nbsp;';
  test.className = 'adsbox';
  document.body.appendChild(test);
  window.setTimeout(function() {
    if (test.offsetHeight === 0) {
        ga('send', 'event', 'Ad Setting', 'Adblock', 'Enabled');
    }
    test.remove();
  }, 400);
  </script>
</body>
</html>
